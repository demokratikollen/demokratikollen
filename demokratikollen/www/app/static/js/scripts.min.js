demokratikollen={},demokratikollen.utils={};var utils=demokratikollen.utils;utils.parties=d3.map([{key:"v",color:"#af0000"},{key:"fi",color:"#d9308e"},{key:"pp",color:"#572b85"},{key:"s",color:"#ee2020"},{key:"mp",color:"#83cf39"},{key:"sd",color:"#dddd00"},{key:"nyd",color:"#dddd00"},{key:"-",color:"#bbbbbb"},{key:"c",color:"#009933"},{key:"m",color:"#1b49dd"},{key:"fp",color:"#6bb7ec"},{key:"kd",color:"#231977"}],function(t){return t.key}),utils.colors=d3.map([{key:"green",color:"#4cd42f"},{key:"yellow",color:"#ebeb2b"},{key:"red",color:"#cb1310"}],function(t){return t.key}),utils.parties.forEach(function(t,e){utils.colors.set(t,{key:e.key,color:e.color})}),parties={mapChart:function(t){function e(t){return function(e){return e[t]}}function n(n){n.each(function(n){var s=n.max_municipality,c=d3.select(this).selectAll("svg").data([n.municipalities]);r.scale(10*o).translate([o/2,a/2]),i.projection(r);var u="rotate(10,"+o/2+","+a/2+")",d=c.enter().append("svg").append("g"),p=(d.attr("class","map-collection").attr("transform",u).selectAll(".map-region").data(t.features,e("id")).enter().append("path").attr("class","map-region").attr("d",i),c.attr("width",o).attr("height",a).selectAll(".map-region").data(n.municipalities,e("id"))),m=d3.rgb("#eee"),f=d3.rgb(color),g=d3.scale.linear().domain([0,s]).range([m,f]),h=d3.select("body").append("div").attr("class","election-tooltip").style("opacity",0),y=h.append("div"),k=d3.select("#municipality-timeseries").style("display","block").style("padding-top","5px");p.on("mouseover",function(t){y.html("<strong>"+l.get(t.id).properties.name+":</strong> <span style='color:"+g(.5*s)+"'>"+Math.round(100*t.votes)+"</span> %"),d3.json("/data/elections/timeseries/m/"+t.id+".json",function(t,e){k.datum(e.d).call(parties.timeSeriesChart())}),h.transition().duration(100).style("opacity",.9)}).on("mousemove",function(){h.style("top",event.pageY-40+"px").style("left",event.pageX+"px")}).on("mouseout",function(){h.transition().duration(100).style("opacity",0)}),p.attr("fill",m).transition().duration(200).attr("fill",function(t){return g(t.votes)}),p.exit().transition().duration(200).attr("fill","black")})}var o=130,a=2.53846153846*o,r=d3.geo.conicEqualArea().parallels([50,70]).center([16.6358,62.1792]),i=d3.geo.path(),l=d3.map(t.features,e("id"));return n.projection=function(t){return arguments.length?(r=t,n):r},n.width=function(t){return arguments.length?(o=t,a=2.53846153846*t,n):o},n.height=function(t){return arguments.length?(a=t,o=t/2.53846153846,n):a},n.color=function(t){return arguments.length?(color=t,n):color},n},timeSeriesChart:function(){function t(t){t.each(function(t){var l=d3.select(this).selectAll("svg").data([t]);l.enter().append("svg"),l=l.selectAll("g").data([t]),a.domain(d3.extent(t,function(t){return t.year})),r.domain(d3.extent(t,function(t){return t.votes})),l.enter().append("g").attr("transform","translate("+e.left+","+e.top+")"),l.attr("width",n+e.left+e.right).attr("height",o+e.top+e.bottom),l=l.append("path").datum(t).attr("class","line").attr("d",i)})}var e={top:5,right:5,bottom:3,left:5},n=80-e.left-e.right,o=40-e.top-e.bottom,a=d3.time.scale().range([0,n]),r=d3.scale.linear().range([o,0]),i=d3.svg.line().x(function(t){return a(t.year)}).y(function(t){return r(t.votes)});return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(o=e,t):o},t},setup:function(t,e,n){d3.json("/data/municipalities.topojson",function(o,a){var r=topojson.feature(a,a.objects.municipalities),i=parties.mapChart(r).width(150).color(n),l=d3.select(t);parties.updateMap=function(t){l.datum(t).call(i)},parties.updateMap(e)})}},Search={Setup:function(){$("#main-search input").on("focusin",function(){$("#main-search").addClass("open")}),$("#main-search input").on("focusout",function(){$("#main-search").removeClass("open")});var t,e={minChars:2};$.getJSON("/data/parliament/members_search.json",function(e){t=new Fuse(e.d,{keys:["fullName","party","groups"],threshold:.6})}),$("#main-search input").on("input",function(t){t.target.value.length>=e.minChars&&(console.log(t),$("#main-search .dropdown-menu").addClass("open"),$("#test").html(t.target.value))})}};
//# sourceMappingURL=../js/scripts.min.js.map