demokratikollen={},demokratikollen.utils={},demokratikollen.graphics={};var utils=demokratikollen.utils;utils.parties=d3.map([{key:"v",color:"#af0000"},{key:"fi",color:"#d9308e"},{key:"pp",color:"#572b85"},{key:"s",color:"#ee2020"},{key:"mp",color:"#83cf39"},{key:"sd",color:"#dddd00"},{key:"nyd",color:"#dddd00"},{key:"-",color:"#bbbbbb"},{key:"c",color:"#009933"},{key:"m",color:"#1b49dd"},{key:"fp",color:"#6bb7ec"},{key:"kd",color:"#231977"}],function(t){return t.key}),utils.colors=d3.map([{key:"green",color:"#4cd42f"},{key:"yellow",color:"#ebeb2b"},{key:"red",color:"#cb1310"}],function(t){return t.key}),utils.parties.forEach(function(t,e){utils.colors.set(t,{key:e.key,color:e.color})}),demokratikollen.graphics.AppointmentsTimeline=function(){function t(t){return d3.min(t,function(t){return t.startDate})}function e(t){return d3.max(t,function(t){return t.endDate})}function n(n,a){return maxDates=[e(n.values),e(a.values)],maxDates[0]!=maxDates[1]?maxDates[1]-maxDates[0]:t(a.values)-t(n.values)}function a(t){return t.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[])}function r(r){r.each(function(r){dataByRowLabel=d3.nest().key(function(t){return t.rowLabel}).entries(r),dataByRowLabel.sort(n);var f=dataByRowLabel.map(function(t){return t.key}),m=t(r),h=e(r);d3.select(this).classed("chart",!0);var g=this.getBoundingClientRect().width-l.left-l.right,y=f.length*o,k=d3.select(this).append("svg").attr("width",g+l.left+l.right).attr("height",y+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")");k.append("rect").attr("width",g).attr("height",y).classed("background",!0);var b=d3.time.scale().domain([m,h]).range([0,g]).nice(c),v=d3.scale.ordinal().domain(f).rangePoints([0,y],1),w=b.ticks(Math.floor(g/u));w=a(w.map(c.floor));var x=d3.svg.axis().scale(b).orient("top").tickSize(-y,0).tickValues(w);x=k.append("g").classed("axis x",!0).call(x),x.selectAll("text").style("text-anchor","start"),k.append("g").classed("rowLabels",!0).selectAll("rowLabels").data(f).enter().append("text").text(function(t){return t}).attr("transform",function(t){return"translate("+s+","+v(t)+")"});var D=d3.svg.line().x(function(t){return b(t[0])}).y(function(t){return v(t[1])});linesSelection=k.append("g").attr("transform",function(){return"translate(0,"+i+")"}).classed("lines",!0).selectAll("lines").data(r).enter(),lines=linesSelection.append("path").attr("d",function(t){return D([[t.startDate,t.rowLabel],[t.endDate,t.rowLabel]])}).attr("class",function(t){return t.cssClass||""}),linesSelection.append("circle").attr("cx",function(t){return b(t.startDate)}).attr("cy",function(t){return v(t.rowLabel)}).attr("r",p),linesSelection.append("circle").attr("cx",function(t){return b(t.endDate)}).attr("cy",function(t){return v(t.rowLabel)}).attr("r",p),d&&(tip=d3.tip().attr("class","d3-tip time-schedule").direction(function(t){var e=b(t.startDate),n=b(t.endDate),a=g/2;return a>=e&&n>=a?"s":e>=a?"sw":a>=n?"se":void 0}).offset(function(t){var e=b(t.startDate),n=b(t.endDate),a=(e+n)/2,r=g/2;return r>=e&&n>=r?[10,r-a]:e>=r?[10,-10]:r>=n?[10,10]:void 0}).html(d),linesSelection.append("path").style("stroke","rgba(0,0,0,0)").style("stroke-width",o-5).attr("d",function(t){return D([[t.startDate,t.rowLabel],[t.endDate,t.rowLabel]])}).call(tip).on("mouseover",tip.show).on("mouseout",tip.hide))})}var o=40,i=10,l={top:40,right:0,bottom:10,left:0},s=10,c=d3.time.year,u=100,d=null,p=4;return r.tipHtml=function(t){return arguments.length?(d=t,r):d},r.timeUnit=function(t){return arguments.length?(c=t,r):c},r.tickLabelWidth=function(t){return arguments.length?(u=t,r):u},r},parties={mapChart:function(t){function e(t){return function(e){return e[t]}}function n(n){n.each(function(n){var s=n.max_municipality,c=d3.select(this).selectAll("svg").data([n.municipalities]);o.scale(10*a).translate([a/2,r/2]),i.projection(o);var u="rotate(10,"+a/2+","+r/2+")",d=c.enter().append("svg").append("g"),p=(d.attr("class","map-collection").attr("transform",u).selectAll(".map-region").data(t.features,e("id")).enter().append("path").attr("class","map-region").attr("d",i),c.attr("width",a).attr("height",r).selectAll(".map-region").data(n.municipalities,e("id"))),f=d3.rgb("#eee"),m=d3.rgb(color),h=d3.scale.linear().domain([0,s]).range([f,m]),g=d3.select("body").append("div").attr("class","election-tooltip").style("opacity",0);p.on("mouseover",function(t){return g.html("<strong>"+l.get(t.id).properties.name+":</strong> <span style='color:"+h(.5*s)+"'>"+Math.round(100*t.votes)+"</span> %").transition().duration(100).style("opacity",.9)}).on("mousemove",function(){return g.style("top",event.pageY-40+"px").style("left",event.pageX+"px")}).on("mouseout",function(){return g.transition().duration(100).style("opacity",0)}),p.attr("fill",f).transition().duration(200).attr("fill",function(t){return h(t.votes)}),p.exit().transition().duration(200).attr("fill","black")})}var a=130,r=2.53846153846*a,o=d3.geo.conicEqualArea().parallels([50,70]).center([16.6358,62.1792]),i=d3.geo.path(),l=d3.map(t.features,e("id"));return n.projection=function(t){return arguments.length?(o=t,n):o},n.width=function(t){return arguments.length?(a=t,r=2.53846153846*t,n):a},n.height=function(t){return arguments.length?(r=t,a=t/2.53846153846,n):r},n.color=function(t){return arguments.length?(color=t,n):color},n},setup:function(t,e,n){d3.json("/data/municipalities.topojson",function(a,r){var o=topojson.feature(r,r.objects.municipalities),i=parties.mapChart(o).width(150).color(n),l=d3.select(t);parties.updateMap=function(t){l.datum(t).call(i)},parties.updateMap(e)})}},Search={Setup:function(){$("#main-search input").on("focusin",function(){$("#main-search").addClass("open")}),$("#main-search input").on("focusout",function(){$("#main-search").removeClass("open")});var t,e={minChars:2};$.getJSON("/data/parliament/members_search.json",function(e){t=new Fuse(e.d,{keys:["fullName","party","groups"],threshold:.6})}),$("#main-search input").on("input",function(t){t.target.value.length>=e.minChars&&(console.log(t),$("#main-search .dropdown-menu").addClass("open"),$("#test").html(t.target.value))})}};
//# sourceMappingURL=../js/scripts.min.js.map