box: wercker/python

build:
    steps:
        - virtualenv:
            name: setup virtualenv
        - pip-install:
            requirements_file: "demokratikollen/requirements/dev.txt"
deploy:
    steps:
        - add-to-known-hosts:
            hostname: 146.185.188.12
        - mktemp:
            envvar: PRIVATEKEY_PATH
        - create-file:
            name: write key
            filename: $PRIVATEKEY_PATH
            content: $DO_PRIVATE
            overwrite: true
            hide-from-log: true
        - script:
            name: transfer application
            code: |
                cd $WERCKER_SOURCE_DIR
                pwd
                ls -la
                scp -r -i $PRIVATEKEY_PATH -o StrictHostKeyChecking=no -o UserKnownHostsFile=no . wercker@146.185.188.12:~/
